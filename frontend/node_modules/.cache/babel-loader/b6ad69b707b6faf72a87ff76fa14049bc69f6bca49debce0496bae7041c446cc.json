{"ast":null,"code":"import React from'react';import{Box,Paper,Grid,Typography,TextField,Button,Switch,FormControlLabel,Divider,Alert}from'@mui/material';import{Save as SaveIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Settings(){const[settings,setSettings]=React.useState({model:{offloadEnabled:true,offloadFolder:'/app/models_cache/offload',cacheDir:'/app/models_cache',maxRamUsage:'4G'},system:{cleanupOnStart:true,enableAuditLog:true,apiKeyHeader:'X-API-KEY'}});const[saved,setSaved]=React.useState(false);React.useEffect(()=>{fetchSettings();},[]);const fetchSettings=async()=>{try{const response=await fetch('/api/settings');const data=await response.json();setSettings(data);}catch(error){console.error('Error fetching settings:',error);}};const handleSave=async()=>{try{await fetch('/api/settings',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(settings)});setSaved(true);setTimeout(()=>setSaved(false),3000);}catch(error){console.error('Error saving settings:',error);}};const handleModelChange=field=>event=>{setSettings(prev=>({...prev,model:{...prev.model,[field]:event.target.type==='checkbox'?event.target.checked:event.target.value}}));};const handleSystemChange=field=>event=>{setSettings(prev=>({...prev,system:{...prev.system,[field]:event.target.type==='checkbox'?event.target.checked:event.target.value}}));};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Settings\"}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Configure system and model settings\"})]}),saved&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",sx:{mb:2},children:\"Settings saved successfully!\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Model Settings\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.model.offloadEnabled,onChange:handleModelChange('offloadEnabled')}),label:\"Enable Weight Offloading\",sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Offload Folder\",value:settings.model.offloadFolder,onChange:handleModelChange('offloadFolder'),margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Cache Directory\",value:settings.model.cacheDir,onChange:handleModelChange('cacheDir'),margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Maximum RAM Usage\",value:settings.model.maxRamUsage,onChange:handleModelChange('maxRamUsage'),margin:\"normal\",helperText:\"Format: 4G, 8G, etc.\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"System Settings\"}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.system.cleanupOnStart,onChange:handleSystemChange('cleanupOnStart')}),label:\"Clean Cache on Startup\",sx:{mb:2}}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.system.enableAuditLog,onChange:handleSystemChange('enableAuditLog')}),label:\"Enable Audit Logging\",sx:{mb:2}}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"API Key Header\",value:settings.system.apiKeyHeader,onChange:handleSystemChange('apiKeyHeader'),margin:\"normal\"})]})})]}),/*#__PURE__*/_jsx(Box,{sx:{mt:3,display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),onClick:handleSave,children:\"Save Settings\"})})]});}export default Settings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}